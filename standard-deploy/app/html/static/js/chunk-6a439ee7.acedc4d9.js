(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6a439ee7"],{"34fa":function(e,i,t){"use strict";t("910c")},"910c":function(e,i,t){},c202:function(e,i,t){"use strict";t.r(i);var l=function(){var e=this,i=e.$createElement,t=e._self._c||i;return t("div",{staticClass:"component-upload-image"},[t("el-upload",{class:{hide:this.fileList.length>=this.limit},attrs:{disabled:e.disabled,action:e.uploadImgUrl,"list-type":"picture-card","on-success":e.handleUploadSuccess,"before-upload":e.handleBeforeUpload,limit:e.limit,"on-error":e.handleUploadError,name:"file","on-remove":e.handleRemove,"show-file-list":!0,headers:e.headers,"file-list":e.fileList}},[t("i",{staticClass:"el-icon-plus"})]),e.showTip?t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v(" 请上传 "),e.fileSize?[e._v(" 大小不超过 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileSize)+"MB")])]:e._e(),e.fileType?[e._v(" 格式为 "),t("b",{staticStyle:{color:"#f56c6c"}},[e._v(e._s(e.fileType.join("/")))])]:e._e(),e._v(" 的文件 ")],2):e._e()],1)},s=[],a=(t("a9e3"),t("d81d"),t("b0c0"),t("a434"),t("fb6a"),t("d3b7"),t("a15b"),t("ac1f"),t("5319"),t("5f87")),n={props:{value:[String,Object,Array],fileSize:{type:Number,default:10},fileType:{type:Array,default:function(){return["doc","xls","ppt","pdf","png","jpg","jpeg","zip","7z","wps"]}},isShowTip:{type:Boolean,default:!0},disabled:{type:Boolean,default:!1}},data:function(){return{limit:1,hideUpload:!1,baseUrl:"/prod-api",uploadImgUrl:"/prod-api/common/upload",headers:{Authorization:"Bearer "+Object(a["a"])()},fileList:[]}},watch:{value:{handler:function(e){var i=this;if(!e)return this.fileList=[],[];var t=Array.isArray(e)?e:this.value.split(",");this.fileList=t.map((function(e){return"string"===typeof e&&(e=-1===e.indexOf(i.baseUrl)?{name:i.baseUrl+e,url:"/file.png"}:{name:e,url:e}),e}))},deep:!0,immediate:!0}},computed:{showTip:function(){return this.isShowTip&&(this.fileType||this.fileSize)}},methods:{handleRemove:function(e,i){var t=this.fileList.map((function(e){return e.name})).indexOf(e.name);t>-1&&(this.fileList.splice(t,1),this.$emit("input",this.listToString(this.fileList)))},handleUploadSuccess:function(e){this.fileList.push({name:e.fileName,url:e.fileName}),this.$emit("input",this.listToString(this.fileList));var i={fileId:this.listToString(this.fileList),fileOriginName:e.fileOriginName,fileSuffix:e.fileSuffix,fileSize:e.fileSize,filePath:e.fileName};this.$emit("handleFilesSuccess",i),this.loading.close()},handleBeforeUpload:function(e){var i=!1;if(this.fileType.length){var t="";e.name.lastIndexOf(".")>-1&&(t=e.name.slice(e.name.lastIndexOf(".")+1)),i=this.fileType.some((function(i){return e.type.indexOf(i)>-1||!!(t&&t.indexOf(i)>-1)}))}else i=e.type.indexOf("image")>-1;if(!i)return this.$message.error("文件格式不正确, 请上传".concat(this.fileType.join("/"),"格式文件!")),!1;if(this.fileSize){var l=e.size/1024/1024<this.fileSize;if(!l)return this.$message.error("上传文件大小不能超过 ".concat(this.fileSize," MB!")),!1}this.loading=this.$loading({lock:!0,text:"上传中",background:"rgba(0, 0, 0, 0.7)"})},handleUploadError:function(){this.$message({type:"error",message:"上传失败"}),this.loading.close()},listToString:function(e,i){var t="";for(var l in i=i||",",e)t+=e[l].url.replace(this.baseUrl,"")+i;return""!=t?t.substr(0,t.length-1):""}}},r=n,o=(t("34fa"),t("2877")),f=Object(o["a"])(r,l,s,!1,null,"71bdaa27",null);i["default"]=f.exports}}]);